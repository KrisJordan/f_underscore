<!DOCTYPE html>  <html> <head>   <title>f_underscore.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               f_underscore.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <pre><code> f_underscore.js 0.0.1
 (c) 2012 Kris Jordan
 `f_underscore` is freely distributable under the MIT license.
 For all details and documentation:
 http://krisjordan.com/f_underscore
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <h2>Baseline</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>All of <code>f_</code>'s functions are plain old functions bundled in an object.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">f_</span>  <span class="o">=</span> <span class="p">{};</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Export <code>f_</code> to the window/global namespace.
Establish the root object, <code>window</code> in the browser, or <code>global</code> on 
the server. The following snippet courtesy of underscore.js.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">root</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">exports</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">_</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;underscore&#39;</span><span class="p">);</span>
        <span class="nx">exports</span><span class="p">.</span><span class="nx">f_</span> <span class="o">=</span> <span class="nx">f_</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">[</span><span class="s1">&#39;f_&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">f_</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">_</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="s1">&#39;_&#39;</span><span class="p">];</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Current version.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">f_</span><span class="p">.</span><span class="nx">VERSION</span> <span class="o">=</span> <span class="s1">&#39;0.0.1&#39;</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Shorthand for the identity function.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">f_</span><span class="p">.</span><span class="nx">I</span> <span class="o">=</span>
    <span class="nx">f_</span><span class="p">.</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">identity</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Given two arrays of same length, one with strings/keys, the other with values, 
return an object comprised of the keys and values.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">f_</span><span class="p">.</span><span class="nx">zipObject</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">keys</span><span class="p">,</span> <span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">pairs</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">zip</span><span class="p">(</span><span class="nx">keys</span><span class="p">,</span><span class="nx">props</span><span class="p">),</span>
            <span class="nx">result</span> <span class="o">=</span> <span class="p">{};</span>
        <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">pairs</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">pair</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">result</span><span class="p">[</span><span class="nx">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="nx">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Given a function <code>f</code>, fill in arguments <code>Af</code> without calling <code>f</code>. Returns a new
function <code>p</code>. When <code>p</code> is called with argumens <code>Ap</code>, function <code>f</code> is called with
a concatenation of <code>Af</code> and <code>Ap</code> for arguments.</p>

<pre><code>partial(F, Af...) generates P
P(Ap...) calls F(Af..., Ap...)
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">rest</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">args</span><span class="p">.</span><span class="nx">concat</span><span class="p">([].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)));</span>
        <span class="p">};</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Given a list of functions, return a new function that, when invoked, will
call each function in the list in succession passing the return value of each
as an argument to the next. The reverse call order of <code>_.compose</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">f_</span><span class="p">.</span><span class="nx">thread</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">;</span>
        <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">val</span> <span class="o">=</span> <span class="p">[</span><span class="nx">args</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">val</span><span class="p">)];</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">val</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="p">};</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <h2>Iterator Function Generators</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Turn a non-function value into a function that returns that value.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">f_</span><span class="p">.</span><span class="nx">functionize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">f_v</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">f_v</span><span class="p">)</span> <span class="o">?</span> <span class="nx">f_v</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(){</span> <span class="k">return</span> <span class="nx">f_v</span><span class="p">;</span> <span class="p">};</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <h3>Accessors</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Make a function that will return the specified property when invoked
with an object.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">f_</span><span class="p">.</span><span class="nx">get</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">prop</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">prop</span><span class="p">];</span>
        <span class="p">};</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Make a function that will return the value of the specified object's
property when invoked with a property.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">f_</span><span class="p">.</span><span class="nx">getByProperty</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">prop</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">prop</span><span class="p">];</span>
        <span class="p">};</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>Make a function that will set the specified property to be the evaluation
of <code>f_v</code> (iterator function or value) when invoked with an object.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">f_</span><span class="p">.</span><span class="nx">set</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">prop</span><span class="p">,</span> <span class="nx">f_v</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">iterator</span> <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">functionize</span><span class="p">(</span><span class="nx">f_v</span><span class="p">);</span>
        <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">obj</span><span class="p">[</span><span class="nx">prop</span><span class="p">]</span> <span class="o">=</span> <span class="nx">iterator</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">obj</span><span class="p">;</span>
        <span class="p">};</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>Make a function that can be called with property names. It will set
the property of the specified object to the evaluation of <code>f_v</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">f_</span><span class="p">.</span><span class="nx">setByProperty</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">f_v</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">iterator</span> <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">functionize</span><span class="p">(</span><span class="nx">f_v</span><span class="p">);</span>
        <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">prop</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">obj</span><span class="p">[</span><span class="nx">prop</span><span class="p">]</span> <span class="o">=</span> <span class="nx">iterator</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">prop</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">obj</span><span class="p">;</span>
        <span class="p">};</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Make a function that when called with an object will return a
new object with only the specified <code>properties</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">f_</span><span class="p">.</span><span class="nx">project</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">properties</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">zipObject</span><span class="p">(</span><span class="nx">properties</span><span class="p">,</span> 
                                <span class="nx">_</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">properties</span><span class="p">,</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">getByProperty</span><span class="p">(</span><span class="nx">obj</span><span class="p">)));</span>
        <span class="p">};</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <h3>Expressions</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>Unary Expression Template</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">f_</span><span class="p">.</span><span class="nx">unaryExpr</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">expr</span><span class="p">,</span> <span class="nx">f_v</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">iterator</span> <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">functionize</span><span class="p">(</span><span class="nx">f_v</span><span class="p">);</span>
        <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">expr</span><span class="p">(</span><span class="nx">iterator</span><span class="p">(</span><span class="nx">obj</span><span class="p">));</span>
        <span class="p">};</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>Binary Expression Template </p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">f_</span><span class="p">.</span><span class="nx">binaryExpr</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">expr</span><span class="p">,</span> <span class="nx">f_v_l</span><span class="p">,</span> <span class="nx">f_v_r</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>Support single arg variants where we're partially applying
the right hand value and using identity as left hand value.
Useful for operations on lists of values rather than objects.
i.e. <em>.map([1,2], f</em>.add(1)) -> [2,3];</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span><span class="p">(</span><span class="nx">f_v_r</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">f_v_r</span> <span class="o">=</span> <span class="nx">f_v_l</span><span class="p">;</span>
            <span class="nx">f_v_l</span> <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">i</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">iterator_l</span> <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">functionize</span><span class="p">(</span><span class="nx">f_v_l</span><span class="p">),</span>
            <span class="nx">iterator_r</span> <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">functionize</span><span class="p">(</span><span class="nx">f_v_r</span><span class="p">);</span>
        <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">expr</span><span class="p">(</span><span class="nx">iterator_l</span><span class="p">(</span><span class="nx">obj</span><span class="p">),</span> <span class="nx">iterator_r</span><span class="p">(</span><span class="nx">obj</span><span class="p">));</span>
        <span class="p">};</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>Ternary Expression Template </p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">f_</span><span class="p">.</span><span class="nx">ternaryExpr</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">expr</span><span class="p">,</span> <span class="nx">f_v_1</span><span class="p">,</span> <span class="nx">f_v_2</span><span class="p">,</span> <span class="nx">f_v_3</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">fn_1</span> <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">functionize</span><span class="p">(</span><span class="nx">f_v_1</span><span class="p">),</span>
            <span class="nx">fn_2</span> <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">functionize</span><span class="p">(</span><span class="nx">f_v_2</span><span class="p">),</span>
            <span class="nx">fn_3</span> <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">functionize</span><span class="p">(</span><span class="nx">f_v_3</span><span class="p">);</span>
        <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">expr</span><span class="p">(</span><span class="nx">fn_1</span><span class="p">(</span><span class="nx">obj</span><span class="p">),</span> <span class="nx">fn_2</span><span class="p">(</span><span class="nx">obj</span><span class="p">),</span> <span class="nx">fn_3</span><span class="p">(</span><span class="nx">obj</span><span class="p">));</span>
        <span class="p">};</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <h3>Primitives</h3>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> </pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>Arithmetic Primitives</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">add</span>         <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span>        <span class="p">{</span> <span class="k">return</span> <span class="nx">l</span> <span class="o">+</span> <span class="nx">r</span><span class="p">;</span> <span class="p">},</span>
    <span class="nx">subtract</span>    <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span>        <span class="p">{</span> <span class="k">return</span> <span class="nx">l</span> <span class="o">-</span> <span class="nx">r</span><span class="p">;</span> <span class="p">},</span>
    <span class="nx">multiply</span>    <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span>        <span class="p">{</span> <span class="k">return</span> <span class="nx">l</span> <span class="o">*</span> <span class="nx">r</span><span class="p">;</span> <span class="p">},</span>
    <span class="nx">divide</span>      <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span>        <span class="p">{</span> <span class="k">return</span> <span class="nx">l</span> <span class="o">/</span> <span class="nx">r</span><span class="p">;</span> <span class="p">},</span>
    <span class="nx">modulo</span>      <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span>        <span class="p">{</span> <span class="k">return</span> <span class="nx">l</span> <span class="o">%</span> <span class="nx">r</span><span class="p">;</span> <span class="p">},</span>

    <span class="nx">increment</span>   <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">l</span><span class="p">)</span>           <span class="p">{</span> <span class="k">return</span> <span class="nx">l</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="p">},</span>
    <span class="nx">decrement</span>   <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">l</span><span class="p">)</span>           <span class="p">{</span> <span class="k">return</span> <span class="nx">l</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="p">},</span>
    <span class="nx">square</span>      <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">l</span><span class="p">)</span>           <span class="p">{</span> <span class="k">return</span> <span class="nx">l</span> <span class="o">*</span> <span class="nx">l</span><span class="p">;</span> <span class="p">},</span>
    <span class="nx">negate</span>      <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">l</span><span class="p">)</span>           <span class="p">{</span> <span class="k">return</span> <span class="nx">l</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>String</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">append</span>      <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span>        <span class="p">{</span> <span class="k">return</span> <span class="s2">&quot;&quot;</span> <span class="o">+</span> <span class="nx">l</span> <span class="o">+</span> <span class="nx">r</span><span class="p">;</span> <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>Relational</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">greaterThan</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span>        <span class="p">{</span> <span class="k">return</span> <span class="nx">l</span> <span class="o">&gt;</span>  <span class="nx">r</span><span class="p">;</span> <span class="p">},</span>
    <span class="nx">atLeast</span>     <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span>        <span class="p">{</span> <span class="k">return</span> <span class="nx">l</span> <span class="o">&gt;=</span> <span class="nx">r</span><span class="p">;</span> <span class="p">},</span>
    <span class="nx">lessThan</span>    <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span>        <span class="p">{</span> <span class="k">return</span> <span class="nx">l</span> <span class="o">&lt;</span>  <span class="nx">r</span><span class="p">;</span> <span class="p">},</span>
    <span class="nx">atMost</span>      <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span>        <span class="p">{</span> <span class="k">return</span> <span class="nx">l</span> <span class="o">&lt;=</span> <span class="nx">r</span><span class="p">;</span> <span class="p">},</span>

    <span class="nx">greaterOf</span>   <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span>        <span class="p">{</span> <span class="k">return</span> <span class="nx">l</span> <span class="o">&gt;</span> <span class="nx">r</span> <span class="o">?</span> <span class="nx">l</span> <span class="o">:</span> <span class="nx">r</span><span class="p">;</span> <span class="p">},</span>
    <span class="nx">lesserOf</span>    <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span>        <span class="p">{</span> <span class="k">return</span> <span class="nx">l</span> <span class="o">&lt;</span> <span class="nx">r</span> <span class="o">?</span> <span class="nx">l</span> <span class="o">:</span> <span class="nx">r</span><span class="p">;</span> <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>Equality</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">equality</span>    <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isEqual</span><span class="p">,</span>
    <span class="nx">inequality</span>  <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>            <span class="p">{</span> <span class="k">return</span> <span class="o">!</span><span class="nx">equality</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">arguments</span><span class="p">);</span> <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>Logical</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">and</span>         <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span>        <span class="p">{</span> <span class="k">return</span> <span class="nx">l</span> <span class="o">&amp;&amp;</span> <span class="nx">r</span><span class="p">;</span> <span class="p">},</span>
    <span class="nx">neither</span>     <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span>        <span class="p">{</span> <span class="k">return</span> <span class="o">!</span><span class="nx">l</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">r</span><span class="p">;</span> <span class="p">},</span>
    <span class="nx">or</span>          <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span>        <span class="p">{</span> <span class="k">return</span> <span class="nx">l</span> <span class="o">||</span> <span class="nx">r</span><span class="p">;</span> <span class="p">},</span>
    <span class="nx">xor</span>         <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span>        <span class="p">{</span> <span class="k">return</span> <span class="p">(</span><span class="nx">l</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">r</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="o">!</span><span class="nx">l</span> <span class="o">&amp;&amp;</span> <span class="nx">r</span><span class="p">);</span> <span class="p">},</span>
    <span class="nx">not</span>         <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">l</span><span class="p">)</span>           <span class="p">{</span> <span class="k">return</span> <span class="o">!</span><span class="nx">l</span><span class="p">;</span> <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>Ternary</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">ternary</span>     <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">t</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span>     <span class="p">{</span> <span class="k">return</span> <span class="nx">i</span> <span class="o">?</span> <span class="nx">t</span> <span class="o">:</span> <span class="nx">e</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <h3>Expression Iterators</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>Unary</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">f_</span><span class="p">.</span><span class="nx">incr</span>         <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">increment</span>    <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">unaryExpr</span><span class="p">,</span> <span class="nx">increment</span><span class="p">);</span>
    <span class="nx">f_</span><span class="p">.</span><span class="nx">decr</span>         <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">decrement</span>    <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">unaryExpr</span><span class="p">,</span> <span class="nx">decrement</span><span class="p">);</span>
    <span class="nx">f_</span><span class="p">.</span><span class="nx">sqr</span>          <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">square</span>       <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">unaryExpr</span><span class="p">,</span> <span class="nx">square</span><span class="p">);</span>
    <span class="nx">f_</span><span class="p">.</span><span class="nx">not</span>                            <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">unaryExpr</span><span class="p">,</span> <span class="nx">not</span><span class="p">);</span>
    <span class="nx">f_</span><span class="p">.</span><span class="nx">neg</span>          <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">negate</span>       <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">unaryExpr</span><span class="p">,</span> <span class="nx">negate</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <p>Binary</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">f_</span><span class="p">.</span><span class="nx">add</span>                              <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">binaryExpr</span><span class="p">,</span> <span class="nx">add</span><span class="p">);</span>
    <span class="nx">f_</span><span class="p">.</span><span class="nx">sub</span>          <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">subtract</span>       <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">binaryExpr</span><span class="p">,</span> <span class="nx">subtract</span><span class="p">);</span>
    <span class="nx">f_</span><span class="p">.</span><span class="nx">mul</span>          <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">multiply</span>       <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">binaryExpr</span><span class="p">,</span> <span class="nx">multiply</span><span class="p">);</span>
    <span class="nx">f_</span><span class="p">.</span><span class="nx">div</span>          <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">divide</span>         <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">binaryExpr</span><span class="p">,</span> <span class="nx">divide</span><span class="p">);</span>
    <span class="nx">f_</span><span class="p">.</span><span class="nx">mod</span>          <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">modulo</span>         <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">binaryExpr</span><span class="p">,</span> <span class="nx">modulo</span><span class="p">);</span>

    <span class="nx">f_</span><span class="p">.</span><span class="nx">concat</span>       <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">append</span>         <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">binaryExpr</span><span class="p">,</span> <span class="nx">append</span><span class="p">);</span>

    <span class="nx">f_</span><span class="p">.</span><span class="nx">gt</span>           <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">greaterThan</span>    <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">binaryExpr</span><span class="p">,</span> <span class="nx">greaterThan</span><span class="p">);</span>
    <span class="nx">f_</span><span class="p">.</span><span class="nx">gte</span>          <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">atLeast</span>        <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">binaryExpr</span><span class="p">,</span> <span class="nx">atLeast</span><span class="p">);</span>
    <span class="nx">f_</span><span class="p">.</span><span class="nx">lt</span>           <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">lessThan</span>       <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">binaryExpr</span><span class="p">,</span> <span class="nx">lessThan</span><span class="p">);</span>
    <span class="nx">f_</span><span class="p">.</span><span class="nx">lte</span>          <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">atMost</span>         <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">binaryExpr</span><span class="p">,</span> <span class="nx">atMost</span><span class="p">);</span>
        
    <span class="nx">f_</span><span class="p">.</span><span class="nx">greaterOf</span>                        <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">binaryExpr</span><span class="p">,</span> <span class="nx">greaterOf</span><span class="p">);</span>
    <span class="nx">f_</span><span class="p">.</span><span class="nx">lesserOf</span>                         <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">binaryExpr</span><span class="p">,</span> <span class="nx">lesserOf</span><span class="p">);</span>

    <span class="nx">f_</span><span class="p">.</span><span class="nx">eq</span>           <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">equality</span>       <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">binaryExpr</span><span class="p">,</span> <span class="nx">equality</span><span class="p">);</span>
    <span class="nx">f_</span><span class="p">.</span><span class="nx">neq</span>          <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">inequality</span>     <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">binaryExpr</span><span class="p">,</span> <span class="nx">inequality</span><span class="p">);</span>

    <span class="nx">f_</span><span class="p">.</span><span class="nx">and</span>                              <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">binaryExpr</span><span class="p">,</span> <span class="nx">and</span><span class="p">);</span>
    <span class="nx">f_</span><span class="p">.</span><span class="nx">neither</span>                          <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">binaryExpr</span><span class="p">,</span> <span class="nx">neither</span><span class="p">);</span>
    <span class="nx">f_</span><span class="p">.</span><span class="nx">or</span>                               <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">binaryExpr</span><span class="p">,</span> <span class="nx">or</span><span class="p">);</span>
    <span class="nx">f_</span><span class="p">.</span><span class="nx">xor</span>                              <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">binaryExpr</span><span class="p">,</span> <span class="nx">xor</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <p>Ternary</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">f_</span><span class="p">.</span><span class="nx">ternary</span> <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">ternaryExpr</span><span class="p">,</span> <span class="nx">ternary</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <h3>Reducer Iterators</h3>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">f_</span><span class="p">.</span><span class="nx">reduceExpr</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">expr</span><span class="p">,</span> <span class="nx">f_v</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">fn</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">f_v</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">fn</span> <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">i</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">fn</span> <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">functionize</span><span class="p">(</span><span class="nx">f_v</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">memo</span><span class="p">,</span> <span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">expr</span><span class="p">(</span><span class="nx">memo</span><span class="p">,</span> <span class="nx">fn</span><span class="p">(</span><span class="nx">obj</span><span class="p">));</span>
        <span class="p">};</span>
    <span class="p">};</span>

    <span class="nx">f_</span><span class="p">.</span><span class="nx">sum</span>      <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">reduceExpr</span><span class="p">,</span> <span class="nx">add</span><span class="p">);</span>
    <span class="nx">f_</span><span class="p">.</span><span class="nx">product</span>  <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">reduceExpr</span><span class="p">,</span> <span class="nx">multiply</span><span class="p">);</span>
    <span class="nx">f_</span><span class="p">.</span><span class="nx">count</span>    <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">reduceExpr</span><span class="p">,</span> <span class="nx">increment</span><span class="p">);</span>
    <span class="nx">f_</span><span class="p">.</span><span class="nx">min</span>      <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">reduceExpr</span><span class="p">,</span> <span class="nx">lesserOf</span><span class="p">);</span>
    <span class="nx">f_</span><span class="p">.</span><span class="nx">max</span>      <span class="o">=</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">partial</span><span class="p">(</span><span class="nx">f_</span><span class="p">.</span><span class="nx">reduceExpr</span><span class="p">,</span> <span class="nx">greaterOf</span><span class="p">);</span>

    <span class="nx">f_</span><span class="p">.</span><span class="nx">avg</span> <span class="o">=</span> 
    <span class="nx">f_</span><span class="p">.</span><span class="nx">average</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">f_v</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">expr</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">numerator</span>   <span class="o">=</span> <span class="p">(</span><span class="nx">l</span> <span class="o">*</span> <span class="nx">count</span><span class="p">)</span> <span class="o">+</span> <span class="nx">r</span><span class="p">,</span>
                <span class="nx">denominator</span> <span class="o">=</span> <span class="o">++</span><span class="nx">count</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">numerator</span> <span class="o">/</span> <span class="nx">denominator</span><span class="p">;</span>
        <span class="p">};</span>
        <span class="k">return</span> <span class="nx">f_</span><span class="p">.</span><span class="nx">reduceExpr</span><span class="p">(</span><span class="nx">expr</span><span class="p">,</span> <span class="nx">f_v</span><span class="p">);</span>
    <span class="p">};</span>

<span class="p">}).</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 