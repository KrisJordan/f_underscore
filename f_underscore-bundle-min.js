// Underscore.js 1.3.1
// (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
// Underscore is freely distributable under the MIT license.
// Portions of Underscore are inspired or borrowed from Prototype,
// Oliver Steele's Functional, and John Resig's Micro-Templating.
// For all details and documentation:
// http://documentcloud.github.com/underscore
// f_underscore.js 0.1.0
// (c) 2012 Kris Jordan
// `f_underscore` is freely distributable under the MIT license.
// Documentation and details at:
// http://krisjordan.com/f_underscore
(function(){function b(a,e,k){if(a===e)return a!==0||1/a==1/e;if(a==null||e==null)return a===e;if(a._chain)a=a._wrapped;if(e._chain)e=e._wrapped;if(a.isEqual&&c.isFunction(a.isEqual))return a.isEqual(e);if(e.isEqual&&c.isFunction(e.isEqual))return e.isEqual(a);var j=g.call(a);if(j!=g.call(e))return false;switch(j){case "[object String]":return a==String(e);case "[object Number]":return a!=+a?e!=+e:a==0?1/a==1/e:a==+e;case "[object Date]":case "[object Boolean]":return+a==+e;case "[object RegExp]":return a.source==
e.source&&a.global==e.global&&a.multiline==e.multiline&&a.ignoreCase==e.ignoreCase}if(typeof a!="object"||typeof e!="object")return false;for(var d=k.length;d--;)if(k[d]==a)return true;k.push(a);var d=0,f=true;if(j=="[object Array]"){if(d=a.length,f=d==e.length)for(;d--;)if(!(f=d in a==d in e&&b(a[d],e[d],k)))break}else{if("constructor"in a!="constructor"in e||a.constructor!=e.constructor)return false;for(var p in a)if(c.has(a,p)&&(d++,!(f=c.has(e,p)&&b(a[p],e[p],k))))break;if(f){for(p in e)if(c.has(e,
p)&&!d--)break;f=!d}}k.pop();return f}var h=this,q=h._,n={},m=Array.prototype,d=Object.prototype,f=m.slice,i=m.unshift,g=d.toString,G=d.hasOwnProperty,w=m.forEach,x=m.map,y=m.reduce,z=m.reduceRight,A=m.filter,B=m.every,C=m.some,r=m.indexOf,D=m.lastIndexOf,d=Array.isArray,H=Object.keys,s=Function.prototype.bind,c=function(a){return new o(a)};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=c;exports._=c}else h._=c;c.VERSION="1.3.1";var l=c.each=
c.forEach=function(a,e,k){if(a!=null)if(w&&a.forEach===w)a.forEach(e,k);else if(a.length===+a.length)for(var j=0,d=a.length;j<d;j++){if(j in a&&e.call(k,a[j],j,a)===n)break}else for(j in a)if(c.has(a,j)&&e.call(k,a[j],j,a)===n)break};c.map=c.collect=function(a,e,c){var j=[];if(a==null)return j;if(x&&a.map===x)return a.map(e,c);l(a,function(a,d,b){j[j.length]=e.call(c,a,d,b)});if(a.length===+a.length)j.length=a.length;return j};c.reduce=c.foldl=c.inject=function(a,e,k,d){var b=arguments.length>2;a==
null&&(a=[]);if(y&&a.reduce===y)return d&&(e=c.bind(e,d)),b?a.reduce(e,k):a.reduce(e);l(a,function(a,c,f){b?k=e.call(d,k,a,c,f):(k=a,b=true)});if(!b)throw new TypeError("Reduce of empty array with no initial value");return k};c.reduceRight=c.foldr=function(a,e,k,d){var b=arguments.length>2;a==null&&(a=[]);if(z&&a.reduceRight===z)return d&&(e=c.bind(e,d)),b?a.reduceRight(e,k):a.reduceRight(e);var f=c.toArray(a).reverse();d&&!b&&(e=c.bind(e,d));return b?c.reduce(f,e,k,d):c.reduce(f,e)};c.find=c.detect=
function(a,e,c){var d;E(a,function(a,b,f){if(e.call(c,a,b,f))return d=a,true});return d};c.filter=c.select=function(a,e,c){var d=[];if(a==null)return d;if(A&&a.filter===A)return a.filter(e,c);l(a,function(a,b,f){e.call(c,a,b,f)&&(d[d.length]=a)});return d};c.reject=function(a,e,c){var d=[];if(a==null)return d;l(a,function(a,b,f){e.call(c,a,b,f)||(d[d.length]=a)});return d};c.every=c.all=function(a,e,c){var d=true;if(a==null)return d;if(B&&a.every===B)return a.every(e,c);l(a,function(a,b,f){if(!(d=
d&&e.call(c,a,b,f)))return n});return d};var E=c.some=c.any=function(a,e,d){e||(e=c.identity);var b=false;if(a==null)return b;if(C&&a.some===C)return a.some(e,d);l(a,function(a,c,f){if(b||(b=e.call(d,a,c,f)))return n});return!!b};c.include=c.contains=function(a,e){var c=false;if(a==null)return c;return r&&a.indexOf===r?a.indexOf(e)!=-1:c=E(a,function(a){return a===e})};c.invoke=function(a,e){var d=f.call(arguments,2);return c.map(a,function(a){return(c.isFunction(e)?e||a:a[e]).apply(a,d)})};c.pluck=
function(a,e){return c.map(a,function(a){return a[e]})};c.max=function(a,e,d){if(!e&&c.isArray(a))return Math.max.apply(Math,a);if(!e&&c.isEmpty(a))return-Infinity;var b={computed:-Infinity};l(a,function(a,c,f){c=e?e.call(d,a,c,f):a;c>=b.computed&&(b={value:a,computed:c})});return b.value};c.min=function(a,e,d){if(!e&&c.isArray(a))return Math.min.apply(Math,a);if(!e&&c.isEmpty(a))return Infinity;var b={computed:Infinity};l(a,function(a,c,f){c=e?e.call(d,a,c,f):a;c<b.computed&&(b={value:a,computed:c})});
return b.value};c.shuffle=function(a){var c=[],d;l(a,function(a,b){b==0?c[0]=a:(d=Math.floor(Math.random()*(b+1)),c[b]=c[d],c[d]=a)});return c};c.sortBy=function(a,e,d){return c.pluck(c.map(a,function(a,c,b){return{value:a,criteria:e.call(d,a,c,b)}}).sort(function(a,c){var e=a.criteria,d=c.criteria;return e<d?-1:e>d?1:0}),"value")};c.groupBy=function(a,e){var d={},b=c.isFunction(e)?e:function(a){return a[e]};l(a,function(a,c){var e=b(a,c);(d[e]||(d[e]=[])).push(a)});return d};c.sortedIndex=function(a,
e,d){d||(d=c.identity);for(var b=0,f=a.length;b<f;){var g=b+f>>1;d(a[g])<d(e)?b=g+1:f=g}return b};c.toArray=function(a){return!a?[]:a.toArray?a.toArray():c.isArray(a)?f.call(a):c.isArguments(a)?f.call(a):c.values(a)};c.size=function(a){return c.toArray(a).length};c.first=c.head=function(a,c,d){return c!=null&&!d?f.call(a,0,c):a[0]};c.initial=function(a,c,d){return f.call(a,0,a.length-(c==null||d?1:c))};c.last=function(a,c,d){return c!=null&&!d?f.call(a,Math.max(a.length-c,0)):a[a.length-1]};c.rest=
c.tail=function(a,c,d){return f.call(a,c==null||d?1:c)};c.compact=function(a){return c.filter(a,function(a){return!!a})};c.flatten=function(a,e){return c.reduce(a,function(a,d){if(c.isArray(d))return a.concat(e?d:c.flatten(d));a[a.length]=d;return a},[])};c.without=function(a){return c.difference(a,f.call(arguments,1))};c.uniq=c.unique=function(a,d,b){var b=b?c.map(a,b):a,f=[];c.reduce(b,function(b,k,g){if(0==g||(d===true?c.last(b)!=k:!c.include(b,k)))b[b.length]=k,f[f.length]=a[g];return b},[]);
return f};c.union=function(){return c.uniq(c.flatten(arguments,true))};c.intersection=c.intersect=function(a){var d=f.call(arguments,1);return c.filter(c.uniq(a),function(a){return c.every(d,function(d){return c.indexOf(d,a)>=0})})};c.difference=function(a){var d=c.flatten(f.call(arguments,1));return c.filter(a,function(a){return!c.include(d,a)})};c.zip=function(){for(var a=f.call(arguments),d=c.max(c.pluck(a,"length")),b=Array(d),j=0;j<d;j++)b[j]=c.pluck(a,""+j);return b};c.indexOf=function(a,d,
b){if(a==null)return-1;var f;if(b)return b=c.sortedIndex(a,d),a[b]===d?b:-1;if(r&&a.indexOf===r)return a.indexOf(d);for(b=0,f=a.length;b<f;b++)if(b in a&&a[b]===d)return b;return-1};c.lastIndexOf=function(a,c){if(a==null)return-1;if(D&&a.lastIndexOf===D)return a.lastIndexOf(c);for(var d=a.length;d--;)if(d in a&&a[d]===c)return d;return-1};c.range=function(a,c,d){arguments.length<=1&&(c=a||0,a=0);for(var d=arguments[2]||1,b=Math.max(Math.ceil((c-a)/d),0),f=0,g=Array(b);f<b;)g[f++]=a,a+=d;return g};
var F=function(){};c.bind=function(a,d){var b,j;if(a.bind===s&&s)return s.apply(a,f.call(arguments,1));if(!c.isFunction(a))throw new TypeError;j=f.call(arguments,2);return b=function(){if(!(this instanceof b))return a.apply(d,j.concat(f.call(arguments)));F.prototype=a.prototype;var c=new F,g=a.apply(c,j.concat(f.call(arguments)));return Object(g)===g?g:c}};c.bindAll=function(a){var d=f.call(arguments,1);d.length==0&&(d=c.functions(a));l(d,function(d){a[d]=c.bind(a[d],a)});return a};c.memoize=function(a,
d){var b={};d||(d=c.identity);return function(){var f=d.apply(this,arguments);return c.has(b,f)?b[f]:b[f]=a.apply(this,arguments)}};c.delay=function(a,c){var d=f.call(arguments,2);return setTimeout(function(){return a.apply(a,d)},c)};c.defer=function(a){return c.delay.apply(c,[a,1].concat(f.call(arguments,1)))};c.throttle=function(a,d){var b,f,g,i,h,l=c.debounce(function(){h=i=false},d);return function(){b=this;f=arguments;var c;g||(g=setTimeout(function(){g=null;h&&a.apply(b,f);l()},d));i?h=true:
a.apply(b,f);l();i=true}};c.debounce=function(a,c){var d;return function(){var b=this,f=arguments;clearTimeout(d);d=setTimeout(function(){d=null;a.apply(b,f)},c)}};c.once=function(a){var c=false,d;return function(){if(c)return d;c=true;return d=a.apply(this,arguments)}};c.wrap=function(a,c){return function(){var d=[a].concat(f.call(arguments,0));return c.apply(this,d)}};c.compose=function(){var a=arguments;return function(){for(var c=arguments,d=a.length-1;d>=0;d--)c=[a[d].apply(this,c)];return c[0]}};
c.after=function(a,c){return a<=0?c():function(){if(--a<1)return c.apply(this,arguments)}};c.keys=H||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var d=[],b;for(b in a)c.has(a,b)&&(d[d.length]=b);return d};c.values=function(a){return c.map(a,c.identity)};c.functions=c.methods=function(a){var d=[],b;for(b in a)c.isFunction(a[b])&&d.push(b);return d.sort()};c.extend=function(a){l(f.call(arguments,1),function(c){for(var d in c)a[d]=c[d]});return a};c.defaults=function(a){l(f.call(arguments,
1),function(c){for(var d in c)a[d]==null&&(a[d]=c[d])});return a};c.clone=function(a){return!c.isObject(a)?a:c.isArray(a)?a.slice():c.extend({},a)};c.tap=function(a,c){c(a);return a};c.isEqual=function(a,c){return b(a,c,[])};c.isEmpty=function(a){if(c.isArray(a)||c.isString(a))return a.length===0;for(var d in a)if(c.has(a,d))return false;return true};c.isElement=function(a){return!!(a&&a.nodeType==1)};c.isArray=d||function(a){return g.call(a)=="[object Array]"};c.isObject=function(a){return a===Object(a)};
c.isArguments=function(a){return g.call(a)=="[object Arguments]"};if(!c.isArguments(arguments))c.isArguments=function(a){return!(!a||!c.has(a,"callee"))};c.isFunction=function(a){return g.call(a)=="[object Function]"};c.isString=function(a){return g.call(a)=="[object String]"};c.isNumber=function(a){return g.call(a)=="[object Number]"};c.isNaN=function(a){return a!==a};c.isBoolean=function(a){return a===true||a===false||g.call(a)=="[object Boolean]"};c.isDate=function(a){return g.call(a)=="[object Date]"};
c.isRegExp=function(a){return g.call(a)=="[object RegExp]"};c.isNull=function(a){return a===null};c.isUndefined=function(a){return a===void 0};c.has=function(a,c){return G.call(a,c)};c.noConflict=function(){h._=q;return this};c.identity=function(a){return a};c.times=function(a,c,d){for(var b=0;b<a;b++)c.call(d,b)};c.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};c.mixin=function(a){l(c.functions(a),
function(d){I(d,c[d]=a[d])})};var J=0;c.uniqueId=function(a){var c=J++;return a?a+c:c};c.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var t=/.^/,u=function(a){return a.replace(/\\\\/g,"\\").replace(/\\'/g,"'")};c.template=function(a,d){var b=c.templateSettings,b="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(b.escape||t,function(a,c){return"',_.escape("+
u(c)+"),'"}).replace(b.interpolate||t,function(a,c){return"',"+u(c)+",'"}).replace(b.evaluate||t,function(a,c){return"');"+u(c).replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",f=new Function("obj","_",b);return d?f(d,c):function(a){return f.call(this,a,c)}};c.chain=function(a){return c(a).chain()};var o=function(a){this._wrapped=a};c.prototype=o.prototype;var v=function(a,d){return d?c(a).chain():a},I=function(a,d){o.prototype[a]=
function(){var a=f.call(arguments);i.call(a,this._wrapped);return v(d.apply(c,a),this._chain)}};c.mixin(c);l("pop,push,reverse,shift,sort,splice,unshift".split(","),function(a){var c=m[a];o.prototype[a]=function(){var d=this._wrapped;c.apply(d,arguments);var b=d.length;(a=="shift"||a=="splice")&&b===0&&delete d[0];return v(d,this._chain)}});l(["concat","join","slice"],function(a){var c=m[a];o.prototype[a]=function(){return v(c.apply(this._wrapped,arguments),this._chain)}});o.prototype.chain=function(){this._chain=
true;return this};o.prototype.value=function(){return this._wrapped}}).call(this);
(function(){var b=function(d){return m(d)};if(typeof exports!=="undefined"){var h=require("underscore");exports.f_=b}else this.f_=b,h=this._;b.VERSION="0.1.0";b.zipObject=function(d,b){var i=h.zip(d,b),g={};h.each(i,function(d){g[d[0]]=d[1]});return g};b.partial=function(d){var b=h.rest(arguments,1);return function(){return d.apply(this,b.concat([].slice.apply(arguments)))}};b.thread=function(){var d=arguments;h.isArray(d[0])&&(d=d[0]);return function(){for(var b=[].slice.apply(arguments),i=0;i<d.length;i++)b=
[d[i].apply(this,b)];return b[0]}};b.callFunction=function(d){return function(b){return b(d)}};b.functionize=function(d){return h.isFunction(d)?d:function(){return d}};b.get=function(d){return function(b){return b[d]}};b.getSet=function(d,b){return function(i){i[d]=b(i[d]);return i}};b.getByProperty=function(d){return function(b){return d[b]}};b.set=function(d,f){var i=b.functionize(f);return function(b){b[d]=i(b);return b}};b.setByProperty=function(d,f){var i=b.functionize(f);return function(b){d[b]=
i(d,b);return d}};b.project=function(d){return function(f){return b.zipObject(d,h.map(d,b.getByProperty(f)))}};b.unaryExpr=function(d,b){if(b===void 0)b=h.identity;return h.isFunction(b)?function(i){return d(b(i))}:function(){return d(b)}};b.binaryExpr=function(d,b,i){if(i===void 0)i=b,b=h.identity;return h.isFunction(b)?h.isFunction(i)?function(g){return d(b(g),i(g))}:function(g){return d(b(g),i)}:h.isFunction(i)?function(g){return d(b,i(g))}:function(){return d(b,i)}};b.methodExpr=function(d){var f=
h.map(h.rest(arguments),b.functionize);return function(b){var g=h.map(f,function(d){return d(b)});b[d]||(b=h.first(g),g=h.rest(g));return b[d].apply(b,g)}};prepend=function(d,b){return(""+b).concat(d)};greaterThan=function(d,b){return d>b};atLeast=function(d,b){return d>=b};lessThan=function(d,b){return d<b};atMost=function(d,b){return d<=b};greaterOf=function(d,b){return d>b?d:b};lesserOf=function(d,b){return d<b?d:b};equality=h.isEqual;inequality=function(){return!equality.apply(this,arguments)};
and=function(d,b){return d&&b};neither=function(d,b){return!d&&!b};or=function(b,f){return b||f};xor=function(b,f){return b&&!f||!b&&f};not=function(b){return!b};b.incr=b.increment=b.partial(b.unaryExpr,function(b){return b+1});b.decr=b.decrement=b.partial(b.unaryExpr,function(b){return b-1});b.sqr=b.square=b.partial(b.unaryExpr,function(b){return b*b});b.not=b.partial(b.unaryExpr,not);b.neg=b.negate=b.partial(b.unaryExpr,function(b){return b*-1});b.add=b.partial(b.binaryExpr,function(b,f){return b+
f});b.sub=b.subtract=b.partial(b.binaryExpr,function(b,f){return b-f});b.mul=b.multiply=b.partial(b.binaryExpr,function(b,f){return b*f});b.div=b.divide=b.partial(b.binaryExpr,function(b,f){return b/f});b.mod=b.modulo=b.partial(b.binaryExpr,function(b,f){return b%f});b.append=b.partial(b.binaryExpr,function(b,f){return(""+b).concat(f)});b.prepend=b.partial(b.binaryExpr,prepend);b.eq=b.isEqual=b.partial(b.binaryExpr,equality);b.neq=b.isNotEqual=b.partial(b.binaryExpr,inequality);b.gt=b.greaterThan=
b.partial(b.binaryExpr,greaterThan);b.gte=b.atLeast=b.partial(b.binaryExpr,atLeast);b.lt=b.lessThan=b.partial(b.binaryExpr,lessThan);b.lte=b.atMost=b.partial(b.binaryExpr,atMost);b.greaterOf=b.partial(b.binaryExpr,greaterOf);b.lesserOf=b.partial(b.binaryExpr,lesserOf);b.and=b.partial(b.binaryExpr,and);b.neither=b.partial(b.binaryExpr,neither);b.or=b.partial(b.binaryExpr,or);b.xor=b.partial(b.binaryExpr,xor);var q="pop,push,reverse,shift,sort,splice,unshift,join,charAt,charCodeAt,fromCharCode,match,replace,search,split,substr,substring,toLowerCase,toUpperCase,concat,indexOf,lastIndexOf,slice".split(",");
h.extend(b,b.zipObject(q,h.map(q,function(d){return b.partial(b.methodExpr,d)})));var n={};h.each(h.functions(b),function(d){n[d]=function(){this._stack.push(b[d].apply(this,arguments));return this}});var m=function(d){var f=[];d!==void 0&&f.push(b.get(d));d=function(){return b.thread(f).apply(this,arguments)};d._stack=f;return h.extend(d,n)}}).call(this);
