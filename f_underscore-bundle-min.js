// Underscore.js 1.3.3
// (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
// Underscore is freely distributable under the MIT license.
// Portions of Underscore are inspired or borrowed from Prototype,
// Oliver Steele's Functional, and John Resig's Micro-Templating.
// For all details and documentation:
// http://documentcloud.github.com/underscore
// f_underscore.js 0.2.0
// (c) 2012 Kris Jordan
// `f_underscore` is freely distributable under the MIT license.
// Documentation and details at:
// http://krisjordan.com/f_underscore
(function(){function a(b,f,j){if(b===f)return 0!==b||1/b==1/f;if(null==b||null==f)return b===f;b._chain&&(b=b._wrapped);f._chain&&(f=f._wrapped);if(b.isEqual&&c.isFunction(b.isEqual))return b.isEqual(f);if(f.isEqual&&c.isFunction(f.isEqual))return f.isEqual(b);var r=h.call(b);if(r!=h.call(f))return!1;switch(r){case "[object String]":return b==""+f;case "[object Number]":return b!=+b?f!=+f:0==b?1/b==1/f:b==+f;case "[object Date]":case "[object Boolean]":return+b==+f;case "[object RegExp]":return b.source==
f.source&&b.global==f.global&&b.multiline==f.multiline&&b.ignoreCase==f.ignoreCase}if("object"!=typeof b||"object"!=typeof f)return!1;for(var e=j.length;e--;)if(j[e]==b)return!0;j.push(b);var e=0,d=!0;if("[object Array]"==r){if(e=b.length,d=e==f.length)for(;e--&&(d=e in b==e in f&&a(b[e],f[e],j)););}else{if("constructor"in b!="constructor"in f||b.constructor!=f.constructor)return!1;for(var g in b)if(c.has(b,g)&&(e++,!(d=c.has(f,g)&&a(b[g],f[g],j))))break;if(d){for(g in f)if(c.has(f,g)&&!e--)break;
d=!e}}j.pop();return d}var i=this,p=i._,m={},l=Array.prototype,e=Object.prototype,d=l.slice,g=l.unshift,h=e.toString,H=e.hasOwnProperty,x=l.forEach,y=l.map,z=l.reduce,A=l.reduceRight,B=l.filter,C=l.every,D=l.some,q=l.indexOf,E=l.lastIndexOf,e=Array.isArray,I=Object.keys,s=Function.prototype.bind,c=function(b){return new n(b)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=c),exports._=c):i._=c;c.VERSION="1.3.3";var k=c.each=c.forEach=function(b,
f,j){if(b!=null)if(x&&b.forEach===x)b.forEach(f,j);else if(b.length===+b.length)for(var a=0,e=b.length;a<e;a++){if(a in b&&f.call(j,b[a],a,b)===m)break}else for(a in b)if(c.has(b,a)&&f.call(j,b[a],a,b)===m)break};c.map=c.collect=function(b,f,c){var a=[];if(b==null)return a;if(y&&b.map===y)return b.map(f,c);k(b,function(b,e,d){a[a.length]=f.call(c,b,e,d)});if(b.length===+b.length)a.length=b.length;return a};c.reduce=c.foldl=c.inject=function(b,f,j,a){var e=arguments.length>2;b==null&&(b=[]);if(z&&
b.reduce===z){a&&(f=c.bind(f,a));return e?b.reduce(f,j):b.reduce(f)}k(b,function(b,c,d){if(e)j=f.call(a,j,b,c,d);else{j=b;e=true}});if(!e)throw new TypeError("Reduce of empty array with no initial value");return j};c.reduceRight=c.foldr=function(b,f,j,a){var e=arguments.length>2;b==null&&(b=[]);if(A&&b.reduceRight===A){a&&(f=c.bind(f,a));return e?b.reduceRight(f,j):b.reduceRight(f)}var d=c.toArray(b).reverse();a&&!e&&(f=c.bind(f,a));return e?c.reduce(d,f,j,a):c.reduce(d,f)};c.find=c.detect=function(b,
f,c){var a;F(b,function(b,e,d){if(f.call(c,b,e,d)){a=b;return true}});return a};c.filter=c.select=function(b,f,c){var a=[];if(b==null)return a;if(B&&b.filter===B)return b.filter(f,c);k(b,function(b,e,d){f.call(c,b,e,d)&&(a[a.length]=b)});return a};c.reject=function(b,f,c){var a=[];if(b==null)return a;k(b,function(b,e,d){f.call(c,b,e,d)||(a[a.length]=b)});return a};c.every=c.all=function(b,f,c){var a=true;if(b==null)return a;if(C&&b.every===C)return b.every(f,c);k(b,function(b,e,d){if(!(a=a&&f.call(c,
b,e,d)))return m});return!!a};var F=c.some=c.any=function(b,f,a){f||(f=c.identity);var e=false;if(b==null)return e;if(D&&b.some===D)return b.some(f,a);k(b,function(b,c,d){if(e||(e=f.call(a,b,c,d)))return m});return!!e};c.include=c.contains=function(b,f){var c=false;if(b==null)return c;if(q&&b.indexOf===q)return b.indexOf(f)!=-1;return c=F(b,function(b){return b===f})};c.invoke=function(b,f){var a=d.call(arguments,2);return c.map(b,function(b){return(c.isFunction(f)?f||b:b[f]).apply(b,a)})};c.pluck=
function(b,f){return c.map(b,function(b){return b[f]})};c.max=function(b,f,a){if(!f&&c.isArray(b)&&b[0]===+b[0])return Math.max.apply(Math,b);if(!f&&c.isEmpty(b))return-Infinity;var e={computed:-Infinity};k(b,function(b,c,d){c=f?f.call(a,b,c,d):b;c>=e.computed&&(e={value:b,computed:c})});return e.value};c.min=function(b,f,a){if(!f&&c.isArray(b)&&b[0]===+b[0])return Math.min.apply(Math,b);if(!f&&c.isEmpty(b))return Infinity;var e={computed:Infinity};k(b,function(b,c,d){c=f?f.call(a,b,c,d):b;c<e.computed&&
(e={value:b,computed:c})});return e.value};c.shuffle=function(b){var c=[],a;k(b,function(b,e){a=Math.floor(Math.random()*(e+1));c[e]=c[a];c[a]=b});return c};c.sortBy=function(b,f,a){var e=c.isFunction(f)?f:function(b){return b[f]};return c.pluck(c.map(b,function(b,c,f){return{value:b,criteria:e.call(a,b,c,f)}}).sort(function(b,c){var f=b.criteria,a=c.criteria;return f===void 0?1:a===void 0?-1:f<a?-1:f>a?1:0}),"value")};c.groupBy=function(b,f){var a={},e=c.isFunction(f)?f:function(b){return b[f]};
k(b,function(b,c){var f=e(b,c);(a[f]||(a[f]=[])).push(b)});return a};c.sortedIndex=function(b,f,a){a||(a=c.identity);for(var e=0,d=b.length;e<d;){var g=e+d>>1;a(b[g])<a(f)?e=g+1:d=g}return e};c.toArray=function(b){return!b?[]:c.isArray(b)||c.isArguments(b)?d.call(b):b.toArray&&c.isFunction(b.toArray)?b.toArray():c.values(b)};c.size=function(b){return c.isArray(b)?b.length:c.keys(b).length};c.first=c.head=c.take=function(b,c,a){return c!=null&&!a?d.call(b,0,c):b[0]};c.initial=function(b,c,a){return d.call(b,
0,b.length-(c==null||a?1:c))};c.last=function(b,c,a){return c!=null&&!a?d.call(b,Math.max(b.length-c,0)):b[b.length-1]};c.rest=c.tail=function(b,c,a){return d.call(b,c==null||a?1:c)};c.compact=function(b){return c.filter(b,function(b){return!!b})};c.flatten=function(b,f){return c.reduce(b,function(b,a){if(c.isArray(a))return b.concat(f?a:c.flatten(a));b[b.length]=a;return b},[])};c.without=function(b){return c.difference(b,d.call(arguments,1))};c.uniq=c.unique=function(b,a,e){var e=e?c.map(b,e):b,
d=[];b.length<3&&(a=true);c.reduce(e,function(e,j,g){if(a?c.last(e)!==j||!e.length:!c.include(e,j)){e.push(j);d.push(b[g])}return e},[]);return d};c.union=function(){return c.uniq(c.flatten(arguments,true))};c.intersection=c.intersect=function(b){var a=d.call(arguments,1);return c.filter(c.uniq(b),function(b){return c.every(a,function(a){return c.indexOf(a,b)>=0})})};c.difference=function(b){var a=c.flatten(d.call(arguments,1),true);return c.filter(b,function(b){return!c.include(a,b)})};c.zip=function(){for(var b=
d.call(arguments),a=c.max(c.pluck(b,"length")),e=Array(a),g=0;g<a;g++)e[g]=c.pluck(b,""+g);return e};c.indexOf=function(b,a,e){if(b==null)return-1;var d;if(e){e=c.sortedIndex(b,a);return b[e]===a?e:-1}if(q&&b.indexOf===q)return b.indexOf(a);e=0;for(d=b.length;e<d;e++)if(e in b&&b[e]===a)return e;return-1};c.lastIndexOf=function(b,c){if(b==null)return-1;if(E&&b.lastIndexOf===E)return b.lastIndexOf(c);for(var a=b.length;a--;)if(a in b&&b[a]===c)return a;return-1};c.range=function(b,c,a){if(arguments.length<=
1){c=b||0;b=0}for(var a=arguments[2]||1,e=Math.max(Math.ceil((c-b)/a),0),d=0,g=Array(e);d<e;){g[d++]=b;b=b+a}return g};var G=function(){};c.bind=function(b,a){var e,g;if(b.bind===s&&s)return s.apply(b,d.call(arguments,1));if(!c.isFunction(b))throw new TypeError;g=d.call(arguments,2);return e=function(){if(!(this instanceof e))return b.apply(a,g.concat(d.call(arguments)));G.prototype=b.prototype;var c=new G,h=b.apply(c,g.concat(d.call(arguments)));return Object(h)===h?h:c}};c.bindAll=function(b){var a=
d.call(arguments,1);a.length==0&&(a=c.functions(b));k(a,function(a){b[a]=c.bind(b[a],b)});return b};c.memoize=function(b,a){var e={};a||(a=c.identity);return function(){var d=a.apply(this,arguments);return c.has(e,d)?e[d]:e[d]=b.apply(this,arguments)}};c.delay=function(b,c){var a=d.call(arguments,2);return setTimeout(function(){return b.apply(null,a)},c)};c.defer=function(b){return c.delay.apply(c,[b,1].concat(d.call(arguments,1)))};c.throttle=function(b,a){var e,d,g,h,i,k,l=c.debounce(function(){i=
h=false},a);return function(){e=this;d=arguments;g||(g=setTimeout(function(){g=null;i&&b.apply(e,d);l()},a));h?i=true:k=b.apply(e,d);l();h=true;return k}};c.debounce=function(b,a,c){var e;return function(){var d=this,g=arguments;c&&!e&&b.apply(d,g);clearTimeout(e);e=setTimeout(function(){e=null;c||b.apply(d,g)},a)}};c.once=function(b){var a=false,c;return function(){if(a)return c;a=true;return c=b.apply(this,arguments)}};c.wrap=function(b,a){return function(){var c=[b].concat(d.call(arguments,0));
return a.apply(this,c)}};c.compose=function(){var b=arguments;return function(){for(var a=arguments,c=b.length-1;c>=0;c--)a=[b[c].apply(this,a)];return a[0]}};c.after=function(b,a){return b<=0?a():function(){if(--b<1)return a.apply(this,arguments)}};c.keys=I||function(b){if(b!==Object(b))throw new TypeError("Invalid object");var a=[],e;for(e in b)c.has(b,e)&&(a[a.length]=e);return a};c.values=function(b){return c.map(b,c.identity)};c.functions=c.methods=function(b){var a=[],e;for(e in b)c.isFunction(b[e])&&
a.push(e);return a.sort()};c.extend=function(b){k(d.call(arguments,1),function(a){for(var c in a)b[c]=a[c]});return b};c.pick=function(b){var a={};k(c.flatten(d.call(arguments,1)),function(c){c in b&&(a[c]=b[c])});return a};c.defaults=function(b){k(d.call(arguments,1),function(a){for(var c in a)b[c]==null&&(b[c]=a[c])});return b};c.clone=function(b){return!c.isObject(b)?b:c.isArray(b)?b.slice():c.extend({},b)};c.tap=function(b,a){a(b);return b};c.isEqual=function(b,c){return a(b,c,[])};c.isEmpty=
function(b){if(b==null)return true;if(c.isArray(b)||c.isString(b))return b.length===0;for(var a in b)if(c.has(b,a))return false;return true};c.isElement=function(b){return!!(b&&b.nodeType==1)};c.isArray=e||function(b){return h.call(b)=="[object Array]"};c.isObject=function(b){return b===Object(b)};c.isArguments=function(b){return h.call(b)=="[object Arguments]"};c.isArguments(arguments)||(c.isArguments=function(b){return!(!b||!c.has(b,"callee"))});c.isFunction=function(b){return h.call(b)=="[object Function]"};
c.isString=function(b){return h.call(b)=="[object String]"};c.isNumber=function(b){return h.call(b)=="[object Number]"};c.isFinite=function(b){return c.isNumber(b)&&isFinite(b)};c.isNaN=function(b){return b!==b};c.isBoolean=function(b){return b===true||b===false||h.call(b)=="[object Boolean]"};c.isDate=function(b){return h.call(b)=="[object Date]"};c.isRegExp=function(b){return h.call(b)=="[object RegExp]"};c.isNull=function(b){return b===null};c.isUndefined=function(b){return b===void 0};c.has=function(b,
a){return H.call(b,a)};c.noConflict=function(){i._=p;return this};c.identity=function(b){return b};c.times=function(b,a,c){for(var e=0;e<b;e++)a.call(c,e)};c.escape=function(b){return(""+b).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};c.result=function(b,a){if(b==null)return null;var e=b[a];return c.isFunction(e)?e.call(b):e};c.mixin=function(b){k(c.functions(b),function(a){J(a,c[a]=b[a])})};var K=0;c.uniqueId=
function(b){var a=K++;return b?b+a:a};c.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var t=/.^/,o={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},u;for(u in o)o[o[u]]=u;var L=/\\|'|\r|\n|\t|\u2028|\u2029/g,M=/\\(\\|'|r|n|t|u2028|u2029)/g,v=function(b){return b.replace(M,function(b,a){return o[a]})};c.template=function(b,a,e){e=c.defaults(e||{},c.templateSettings);b="__p+='"+b.replace(L,function(b){return"\\"+o[b]}).replace(e.escape||
t,function(b,a){return"'+\n_.escape("+v(a)+")+\n'"}).replace(e.interpolate||t,function(b,a){return"'+\n("+v(a)+")+\n'"}).replace(e.evaluate||t,function(b,a){return"';\n"+v(a)+"\n;__p+='"})+"';\n";e.variable||(b="with(obj||{}){\n"+b+"}\n");var b="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+b+"return __p;\n",d=new Function(e.variable||"obj","_",b);if(a)return d(a,c);a=function(b){return d.call(this,b,c)};a.source="function("+(e.variable||"obj")+"){\n"+b+"}";return a};
c.chain=function(b){return c(b).chain()};var n=function(b){this._wrapped=b};c.prototype=n.prototype;var w=function(b,a){return a?c(b).chain():b},J=function(b,a){n.prototype[b]=function(){var b=d.call(arguments);g.call(b,this._wrapped);return w(a.apply(c,b),this._chain)}};c.mixin(c);k("pop,push,reverse,shift,sort,splice,unshift".split(","),function(b){var a=l[b];n.prototype[b]=function(){var c=this._wrapped;a.apply(c,arguments);var e=c.length;(b=="shift"||b=="splice")&&e===0&&delete c[0];return w(c,
this._chain)}});k(["concat","join","slice"],function(b){var a=l[b];n.prototype[b]=function(){return w(a.apply(this._wrapped,arguments),this._chain)}});n.prototype.chain=function(){this._chain=true;return this};n.prototype.value=function(){return this._wrapped}}).call(this);
(function(){var a=function(a){return l(a)};if("undefined"!==typeof exports){var i=require("underscore");exports.f_=a}else this.f_=a,i=this._;a.VERSION="0.2.0";a.zipObject=function(a,d){var g=i.zip(a,d),h={};i.each(g,function(a){h[a[0]]=a[1]});return h};a.partial=function(a){var d=i.rest(arguments,1);return function(){return a.apply(this,d.concat([].slice.apply(arguments)))}};a.thread=function(){var a=arguments;i.isArray(a[0])&&(a=a[0]);return function(){for(var d=[].slice.apply(arguments),g=0;g<a.length;g++)d=
[a[g].apply(this,d)];return d[0]}};a.callFunction=function(a){return function(d){return d(a)}};a.functionize=function(a){return i.isFunction(a)?a:function(){return a}};a.get=function(a){return function(d){return d[a]}};a.getSet=function(a,d){return function(g){g[a]=d(g[a]);return g}};a.getByProperty=function(a){return function(d){return a[d]}};a.set=function(e,d){var g=a.functionize(d);return function(a){a[e]=g(a);return a}};a.setByProperty=function(e,d){var g=a.functionize(d);return function(a){e[a]=
g(e,a);return e}};a.project=function(e){return function(d){return a.zipObject(e,i.map(e,a.getByProperty(d)))}};a.unaryExpr=function(a,d){void 0===d&&(d=i.identity);return i.isFunction(d)?function(g){return a(d(g))}:function(){return a(d)}};a.binaryExpr=function(a,d,g){void 0===g&&(g=d,d=i.identity);return i.isFunction(d)?i.isFunction(g)?function(h){return a(d(h),g(h))}:function(h){return a(d(h),g)}:i.isFunction(g)?function(h){return a(d,g(h))}:function(){return a(d,g)}};a.ternaryExpr=function(e,d,
g,h){void 0===h&&(h=g,g=d,d=i.identity);d=a.functionize(d);g=a.functionize(g);h=a.functionize(h);return function(a){return e(d(a),g(a),h(a))}};a.methodExpr=function(e){var d=i.map(i.rest(arguments),a.functionize);return function(a){var h=i.map(d,function(e){return e(a)});a[e]||(a=i.first(h),h=i.rest(h));return a[e].apply(a,h)}};prepend=function(a,d){return(""+d).concat(a)};greaterThan=function(a,d){return a>d};atLeast=function(a,d){return a>=d};lessThan=function(a,d){return a<d};atMost=function(a,
d){return a<=d};greaterOf=function(a,d){return a>d?a:d};lesserOf=function(a,d){return a<d?a:d};equality=i.isEqual;inequality=function(){return!equality.apply(this,arguments)};and=function(a,d){return a&&d};neither=function(a,d){return!a&&!d};or=function(a,d){return a||d};xor=function(a,d){return a&&!d||!a&&d};not=function(a){return!a};ternary=function(a,d,g){return a?d:g};a.incr=a.increment=a.partial(a.unaryExpr,function(a){return a+1});a.decr=a.decrement=a.partial(a.unaryExpr,function(a){return a-
1});a.sqr=a.square=a.partial(a.unaryExpr,function(a){return a*a});a.not=a.partial(a.unaryExpr,not);a.neg=a.negate=a.partial(a.unaryExpr,function(a){return-1*a});a.add=a.partial(a.binaryExpr,function(a,d){return a+d});a.sub=a.subtract=a.partial(a.binaryExpr,function(a,d){return a-d});a.mul=a.multiply=a.partial(a.binaryExpr,function(a,d){return a*d});a.div=a.divide=a.partial(a.binaryExpr,function(a,d){return a/d});a.mod=a.modulo=a.partial(a.binaryExpr,function(a,d){return a%d});a.append=a.partial(a.binaryExpr,
function(a,d){return(""+a).concat(d)});a.prepend=a.partial(a.binaryExpr,prepend);a.eq=a.isEqual=a.partial(a.binaryExpr,equality);a.neq=a.isNotEqual=a.partial(a.binaryExpr,inequality);a.gt=a.greaterThan=a.partial(a.binaryExpr,greaterThan);a.gte=a.atLeast=a.partial(a.binaryExpr,atLeast);a.lt=a.lessThan=a.partial(a.binaryExpr,lessThan);a.lte=a.atMost=a.partial(a.binaryExpr,atMost);a.greaterOf=a.partial(a.binaryExpr,greaterOf);a.lesserOf=a.partial(a.binaryExpr,lesserOf);a.and=a.partial(a.binaryExpr,and);
a.neither=a.partial(a.binaryExpr,neither);a.or=a.partial(a.binaryExpr,or);a.xor=a.partial(a.binaryExpr,xor);a.ternary=a.partial(a.ternaryExpr,ternary);var p="pop,push,reverse,shift,sort,splice,unshift,join,charAt,charCodeAt,fromCharCode,match,replace,search,split,substr,substring,toLowerCase,toUpperCase,concat,indexOf,lastIndexOf,slice".split(",");i.extend(a,a.zipObject(p,i.map(p,function(e){return a.partial(a.methodExpr,e)})));var m={};i.each(i.functions(a),function(e){m[e]=function(){this._stack.push(a[e].apply(this,
arguments));return this}});var l=function(e){var d=[];void 0!==e&&d.push(a.get(e));e=function(){return a.thread(d).apply(this,arguments)};e._stack=d;return i.extend(e,m)}}).call(this);
