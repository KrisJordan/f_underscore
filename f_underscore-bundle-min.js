// Underscore.js 1.2.1
// (c) 2011 Jeremy Ashkenas, DocumentCloud Inc.
// Underscore is freely distributable under the MIT license.
// Portions of Underscore are inspired or borrowed from Prototype,
// Oliver Steele's Functional, and John Resig's Micro-Templating.
// For all details and documentation:
// http://documentcloud.github.com/underscore
// f_underscore.js 0.1.0
// (c) 2012 Kris Jordan
// `f_underscore` is freely distributable under the MIT license.
// Documentation and details at:
// http://krisjordan.com/f_underscore
(function(){function c(a,e,j){if(a===e)return a!==0||1/a==1/e;if(a==null||e==null)return a===e;if(a._chain)a=a._wrapped;if(e._chain)e=e._wrapped;if(d.isFunction(a.isEqual))return a.isEqual(e);if(d.isFunction(e.isEqual))return e.isEqual(a);var m=typeof a;if(m!=typeof e)return false;if(!a!=!e)return false;if(d.isNaN(a))return d.isNaN(e);var b=d.isString(a),f=d.isString(e);if(b||f)return b&&f&&String(a)==String(e);b=d.isNumber(a);f=d.isNumber(e);if(b||f)return b&&f&&+a==+e;b=d.isBoolean(a);f=d.isBoolean(e);
if(b||f)return b&&f&&+a==+e;b=d.isDate(a);f=d.isDate(e);if(b||f)return b&&f&&a.getTime()==e.getTime();b=d.isRegExp(a);f=d.isRegExp(e);if(b||f)return b&&f&&a.source==e.source&&a.global==e.global&&a.multiline==e.multiline&&a.ignoreCase==e.ignoreCase;if(m!="object")return false;if(a.length!==e.length)return false;if(a.constructor!==e.constructor)return false;for(m=j.length;m--;)if(j[m]==a)return true;j.push(a);var m=0,b=true,o;for(o in a)if(n.call(a,o)&&(m++,!(b=n.call(e,o)&&c(a[o],e[o],j))))break;if(b){for(o in e)if(n.call(e,
o)&&!m--)break;b=!m}j.pop();return b}var h=this,r=h._,p={},l=Array.prototype,b=Object.prototype,f=l.slice,g=l.unshift,i=b.toString,n=b.hasOwnProperty,v=l.forEach,w=l.map,x=l.reduce,y=l.reduceRight,z=l.filter,A=l.every,B=l.some,s=l.indexOf,C=l.lastIndexOf,b=Array.isArray,F=Object.keys,t=Function.prototype.bind,d=function(a){return new q(a)};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=d;exports._=d}else typeof define==="function"&&define.amd?
define("underscore",function(){return d}):h._=d;d.VERSION="1.2.1";var k=d.each=d.forEach=function(a,e,d){if(a!=null)if(v&&a.forEach===v)a.forEach(e,d);else if(a.length===+a.length)for(var b=0,c=a.length;b<c;b++){if(b in a&&e.call(d,a[b],b,a)===p)break}else for(b in a)if(n.call(a,b)&&e.call(d,a[b],b,a)===p)break};d.map=function(a,e,d){var b=[];if(a==null)return b;if(w&&a.map===w)return a.map(e,d);k(a,function(a,c,f){b[b.length]=e.call(d,a,c,f)});return b};d.reduce=d.foldl=d.inject=function(a,e,j,b){var c=
j!==void 0;a==null&&(a=[]);if(x&&a.reduce===x)return b&&(e=d.bind(e,b)),c?a.reduce(e,j):a.reduce(e);k(a,function(a,d,f){c?j=e.call(b,j,a,d,f):(j=a,c=true)});if(!c)throw new TypeError("Reduce of empty array with no initial value");return j};d.reduceRight=d.foldr=function(a,e,j,b){a==null&&(a=[]);if(y&&a.reduceRight===y)return b&&(e=d.bind(e,b)),j!==void 0?a.reduceRight(e,j):a.reduceRight(e);a=(d.isArray(a)?a.slice():d.toArray(a)).reverse();return d.reduce(a,e,j,b)};d.find=d.detect=function(a,e,d){var b;
D(a,function(a,c,f){if(e.call(d,a,c,f))return b=a,true});return b};d.filter=d.select=function(a,e,d){var b=[];if(a==null)return b;if(z&&a.filter===z)return a.filter(e,d);k(a,function(a,c,f){e.call(d,a,c,f)&&(b[b.length]=a)});return b};d.reject=function(a,e,d){var b=[];if(a==null)return b;k(a,function(a,c,f){e.call(d,a,c,f)||(b[b.length]=a)});return b};d.every=d.all=function(a,e,d){var b=true;if(a==null)return b;if(A&&a.every===A)return a.every(e,d);k(a,function(a,c,f){if(!(b=b&&e.call(d,a,c,f)))return p});
return b};var D=d.some=d.any=function(a,e,b){var e=e||d.identity,c=false;if(a==null)return c;if(B&&a.some===B)return a.some(e,b);k(a,function(a,d,f){if(c|=e.call(b,a,d,f))return p});return!!c};d.include=d.contains=function(a,e){var d=false;if(a==null)return d;return s&&a.indexOf===s?a.indexOf(e)!=-1:d=D(a,function(a){return a===e})};d.invoke=function(a,e){var b=f.call(arguments,2);return d.map(a,function(a){return(e.call?e||a:a[e]).apply(a,b)})};d.pluck=function(a,e){return d.map(a,function(a){return a[e]})};
d.max=function(a,e,b){if(!e&&d.isArray(a))return Math.max.apply(Math,a);if(!e&&d.isEmpty(a))return-Infinity;var c={computed:-Infinity};k(a,function(a,d,f){d=e?e.call(b,a,d,f):a;d>=c.computed&&(c={value:a,computed:d})});return c.value};d.min=function(a,e,b){if(!e&&d.isArray(a))return Math.min.apply(Math,a);if(!e&&d.isEmpty(a))return Infinity;var c={computed:Infinity};k(a,function(a,d,f){d=e?e.call(b,a,d,f):a;d<c.computed&&(c={value:a,computed:d})});return c.value};d.shuffle=function(a){var d=[],b;
k(a,function(a,c){c==0?d[0]=a:(b=Math.floor(Math.random()*(c+1)),d[c]=d[b],d[b]=a)});return d};d.sortBy=function(a,e,b){return d.pluck(d.map(a,function(a,d,c){return{value:a,criteria:e.call(b,a,d,c)}}).sort(function(a,d){var e=a.criteria,b=d.criteria;return e<b?-1:e>b?1:0}),"value")};d.groupBy=function(a,e){var b={},c=d.isFunction(e)?e:function(a){return a[e]};k(a,function(a,d){var e=c(a,d);(b[e]||(b[e]=[])).push(a)});return b};d.sortedIndex=function(a,e,b){b||(b=d.identity);for(var c=0,f=a.length;c<
f;){var g=c+f>>1;b(a[g])<b(e)?c=g+1:f=g}return c};d.toArray=function(a){return!a?[]:a.toArray?a.toArray():d.isArray(a)?f.call(a):d.isArguments(a)?f.call(a):d.values(a)};d.size=function(a){return d.toArray(a).length};d.first=d.head=function(a,d,b){return d!=null&&!b?f.call(a,0,d):a[0]};d.initial=function(a,d,b){return f.call(a,0,a.length-(d==null||b?1:d))};d.last=function(a,d,b){return d!=null&&!b?f.call(a,a.length-d):a[a.length-1]};d.rest=d.tail=function(a,d,b){return f.call(a,d==null||b?1:d)};d.compact=
function(a){return d.filter(a,function(a){return!!a})};d.flatten=function(a,b){return d.reduce(a,function(a,c){if(d.isArray(c))return a.concat(b?c:d.flatten(c));a[a.length]=c;return a},[])};d.without=function(a){return d.difference(a,f.call(arguments,1))};d.uniq=d.unique=function(a,b,c){var c=c?d.map(a,c):a,f=[];d.reduce(c,function(c,j,g){if(0==g||(b===true?d.last(c)!=j:!d.include(c,j)))c[c.length]=j,f[f.length]=a[g];return c},[]);return f};d.union=function(){return d.uniq(d.flatten(arguments,true))};
d.intersection=d.intersect=function(a){var b=f.call(arguments,1);return d.filter(d.uniq(a),function(a){return d.every(b,function(b){return d.indexOf(b,a)>=0})})};d.difference=function(a,b){return d.filter(a,function(a){return!d.include(b,a)})};d.zip=function(){for(var a=f.call(arguments),b=d.max(d.pluck(a,"length")),c=Array(b),m=0;m<b;m++)c[m]=d.pluck(a,""+m);return c};d.indexOf=function(a,b,c){if(a==null)return-1;var f;if(c)return c=d.sortedIndex(a,b),a[c]===b?c:-1;if(s&&a.indexOf===s)return a.indexOf(b);
for(c=0,f=a.length;c<f;c++)if(a[c]===b)return c;return-1};d.lastIndexOf=function(a,d){if(a==null)return-1;if(C&&a.lastIndexOf===C)return a.lastIndexOf(d);for(var b=a.length;b--;)if(a[b]===d)return b;return-1};d.range=function(a,d,b){arguments.length<=1&&(d=a||0,a=0);for(var b=arguments[2]||1,c=Math.max(Math.ceil((d-a)/b),0),f=0,g=Array(c);f<c;)g[f++]=a,a+=b;return g};var E=function(){};d.bind=function(a,b){var c,g;if(a.bind===t&&t)return t.apply(a,f.call(arguments,1));if(!d.isFunction(a))throw new TypeError;
g=f.call(arguments,2);return c=function(){if(!(this instanceof c))return a.apply(b,g.concat(f.call(arguments)));E.prototype=a.prototype;var d=new E,i=a.apply(d,g.concat(f.call(arguments)));return Object(i)===i?i:d}};d.bindAll=function(a){var b=f.call(arguments,1);b.length==0&&(b=d.functions(a));k(b,function(b){a[b]=d.bind(a[b],a)});return a};d.memoize=function(a,b){var c={};b||(b=d.identity);return function(){var d=b.apply(this,arguments);return n.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}};d.delay=
function(a,d){var b=f.call(arguments,2);return setTimeout(function(){return a.apply(a,b)},d)};d.defer=function(a){return d.delay.apply(d,[a,1].concat(f.call(arguments,1)))};d.throttle=function(a,b){var c,f,g,i,h,k=d.debounce(function(){h=i=false},b);return function(){c=this;f=arguments;var d;g||(g=setTimeout(function(){g=null;h&&a.apply(c,f);k()},b));i?h=true:a.apply(c,f);k();i=true}};d.debounce=function(a,d){var b;return function(){var c=this,f=arguments;clearTimeout(b);b=setTimeout(function(){b=
null;a.apply(c,f)},d)}};d.once=function(a){var b=false,d;return function(){if(b)return d;b=true;return d=a.apply(this,arguments)}};d.wrap=function(a,b){return function(){var d=[a].concat(f.call(arguments));return b.apply(this,d)}};d.compose=function(){var a=f.call(arguments);return function(){for(var b=f.call(arguments),d=a.length-1;d>=0;d--)b=[a[d].apply(this,b)];return b[0]}};d.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}};d.keys=F||function(a){if(a!==Object(a))throw new TypeError("Invalid object");
var b=[],d;for(d in a)n.call(a,d)&&(b[b.length]=d);return b};d.values=function(a){return d.map(a,d.identity)};d.functions=d.methods=function(a){var b=[],c;for(c in a)d.isFunction(a[c])&&b.push(c);return b.sort()};d.extend=function(a){k(f.call(arguments,1),function(b){for(var d in b)b[d]!==void 0&&(a[d]=b[d])});return a};d.defaults=function(a){k(f.call(arguments,1),function(b){for(var d in b)a[d]==null&&(a[d]=b[d])});return a};d.clone=function(a){return!d.isObject(a)?a:d.isArray(a)?a.slice():d.extend({},
a)};d.tap=function(a,b){b(a);return a};d.isEqual=function(a,b){return c(a,b,[])};d.isEmpty=function(a){if(d.isArray(a)||d.isString(a))return a.length===0;for(var b in a)if(n.call(a,b))return false;return true};d.isElement=function(a){return!!(a&&a.nodeType==1)};d.isArray=b||function(a){return i.call(a)=="[object Array]"};d.isObject=function(a){return a===Object(a)};d.isArguments=i.call(arguments)=="[object Arguments]"?function(a){return i.call(a)=="[object Arguments]"}:function(a){return!(!a||!n.call(a,
"callee"))};d.isFunction=function(a){return i.call(a)=="[object Function]"};d.isString=function(a){return i.call(a)=="[object String]"};d.isNumber=function(a){return i.call(a)=="[object Number]"};d.isNaN=function(a){return a!==a};d.isBoolean=function(a){return a===true||a===false||i.call(a)=="[object Boolean]"};d.isDate=function(a){return i.call(a)=="[object Date]"};d.isRegExp=function(a){return i.call(a)=="[object RegExp]"};d.isNull=function(a){return a===null};d.isUndefined=function(a){return a===
void 0};d.noConflict=function(){h._=r;return this};d.identity=function(a){return a};d.times=function(a,b,d){for(var c=0;c<a;c++)b.call(d,c)};d.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};d.mixin=function(a){k(d.functions(a),function(b){G(b,d[b]=a[b])})};var H=0;d.uniqueId=function(a){var b=H++;return a?a+b:b};d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,
escape:/<%-([\s\S]+?)%>/g};d.template=function(a,b){var c=d.templateSettings,c="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.escape,function(a,b){return"',_.escape("+b.replace(/\\'/g,"'")+"),'"}).replace(c.interpolate,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(c.evaluate||null,function(a,b){return"');"+b.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,
"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",f=new Function("obj","_",c);return b?f(b,d):function(a){return f(a,d)}};var q=function(a){this._wrapped=a};d.prototype=q.prototype;var u=function(a,b){return b?d(a).chain():a},G=function(a,b){q.prototype[a]=function(){var a=f.call(arguments);g.call(a,this._wrapped);return u(b.apply(d,a),this._chain)}};d.mixin(d);k("pop,push,reverse,shift,sort,splice,unshift".split(","),function(a){var b=l[a];q.prototype[a]=function(){b.apply(this._wrapped,arguments);
return u(this._wrapped,this._chain)}});k(["concat","join","slice"],function(a){var b=l[a];q.prototype[a]=function(){return u(b.apply(this._wrapped,arguments),this._chain)}});q.prototype.chain=function(){this._chain=true;return this};q.prototype.value=function(){return this._wrapped}}).call(this);
(function(){var c=function(b){return l(b)};if(typeof exports!=="undefined"){var h=require("underscore");exports.f_=c}else this.f_=c,h=this._;c.VERSION="0.1.0";c.zipObject=function(b,c){var g=h.zip(b,c),i={};h.each(g,function(b){i[b[0]]=b[1]});return i};c.partial=function(b){var c=h.rest(arguments,1);return function(){return b.apply(this,c.concat([].slice.apply(arguments)))}};c.thread=function(){var b=arguments;h.isArray(b[0])&&(b=b[0]);return function(){for(var c=[].slice.apply(arguments),g=0;g<b.length;g++)c=
[b[g].apply(this,c)];return c[0]}};c.callFunction=function(b){return function(c){return c(b)}};c.functionize=function(b){return h.isFunction(b)?b:function(){return b}};c.get=function(b){return function(c){return c[b]}};c.getSet=function(b,c){return function(g){g[b]=c(g[b]);return g}};c.getByProperty=function(b){return function(c){return b[c]}};c.set=function(b,f){var g=c.functionize(f);return function(c){c[b]=g(c);return c}};c.setByProperty=function(b,f){var g=c.functionize(f);return function(c){b[c]=
g(b,c);return b}};c.project=function(b){return function(f){return c.zipObject(b,h.map(b,c.getByProperty(f)))}};c.unaryExpr=function(b,c){if(c===void 0)c=h.identity;return h.isFunction(c)?function(g){return b(c(g))}:function(){return b(c)}};c.binaryExpr=function(b,c,g){if(g===void 0)g=c,c=h.identity;return h.isFunction(c)?h.isFunction(g)?function(h){return b(c(h),g(h))}:function(h){return b(c(h),g)}:h.isFunction(g)?function(h){return b(c,g(h))}:function(){return b(c,g)}};c.methodExpr=function(b){var f=
h.map(h.rest(arguments),c.functionize);return function(c){var i=h.map(f,function(b){return b(c)});c[b]||(c=h.first(i),i=h.rest(i));return c[b].apply(c,i)}};prepend=function(b,c){return(""+c).concat(b)};greaterThan=function(b,c){return b>c};atLeast=function(b,c){return b>=c};lessThan=function(b,c){return b<c};atMost=function(b,c){return b<=c};greaterOf=function(b,c){return b>c?b:c};lesserOf=function(b,c){return b<c?b:c};equality=h.isEqual;inequality=function(){return!equality.apply(this,arguments)};
and=function(b,c){return b&&c};neither=function(b,c){return!b&&!c};or=function(b,c){return b||c};xor=function(b,c){return b&&!c||!b&&c};not=function(b){return!b};c.incr=c.increment=c.partial(c.unaryExpr,function(b){return b+1});c.decr=c.decrement=c.partial(c.unaryExpr,function(b){return b-1});c.sqr=c.square=c.partial(c.unaryExpr,function(b){return b*b});c.not=c.partial(c.unaryExpr,not);c.neg=c.negate=c.partial(c.unaryExpr,function(b){return b*-1});c.add=c.partial(c.binaryExpr,function(b,c){return b+
c});c.sub=c.subtract=c.partial(c.binaryExpr,function(b,c){return b-c});c.mul=c.multiply=c.partial(c.binaryExpr,function(b,c){return b*c});c.div=c.divide=c.partial(c.binaryExpr,function(b,c){return b/c});c.mod=c.modulo=c.partial(c.binaryExpr,function(b,c){return b%c});c.append=c.partial(c.binaryExpr,function(b,c){return(""+b).concat(c)});c.prepend=c.partial(c.binaryExpr,prepend);c.eq=c.isEqual=c.partial(c.binaryExpr,equality);c.neq=c.isNotEqual=c.partial(c.binaryExpr,inequality);c.gt=c.greaterThan=
c.partial(c.binaryExpr,greaterThan);c.gte=c.atLeast=c.partial(c.binaryExpr,atLeast);c.lt=c.lessThan=c.partial(c.binaryExpr,lessThan);c.lte=c.atMost=c.partial(c.binaryExpr,atMost);c.greaterOf=c.partial(c.binaryExpr,greaterOf);c.lesserOf=c.partial(c.binaryExpr,lesserOf);c.and=c.partial(c.binaryExpr,and);c.neither=c.partial(c.binaryExpr,neither);c.or=c.partial(c.binaryExpr,or);c.xor=c.partial(c.binaryExpr,xor);var r="pop,push,reverse,shift,sort,splice,unshift,join,charAt,charCodeAt,fromCharCode,match,replace,search,split,substr,substring,toLowerCase,toUpperCase,concat,indexOf,lastIndexOf,slice".split(",");
h.extend(c,c.zipObject(r,h.map(r,function(b){return c.partial(c.methodExpr,b)})));var p={};h.each(h.functions(c),function(b){p[b]=function(){this._stack.push(c[b].apply(this,arguments));return this}});var l=function(b){var f=[];b!==void 0&&f.push(c.get(b));b=function(){return c.thread(f).apply(this,arguments)};b._stack=f;return h.extend(b,p)}}).call(this);
