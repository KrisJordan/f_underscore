// f_underscore.js 0.0.1
// (c) 2012 Kris Jordan
// `f_underscore` is freely distributable under the MIT license.
// For all details and documentation:
// http://krisjordan.com/f_underscore
(function(){var a={};if(typeof exports!=="undefined"){var d=require("underscore");exports.f_=a}else this.f_=a,d=this._;a.VERSION="0.0.1";a.I=a.i=d.identity;a.zipObject=function(a,b){var c=d.zip(a,b),f={};d.each(c,function(a){f[a[0]]=a[1]});return f};a.permute=function(a,b){if(a.length===0&&b.length>0)var c=b,b=a,a=c;for(var c=[],f=0;f<a.length;f++)if(b.length>0)for(var d=0;d<b.length;d++)c.push([a[f],b[d]]);else c.push([a[f]]);return c};a.partial=function(a){var b=d.rest(arguments,1);return function(){return a.apply(this,
b.concat([].slice.apply(arguments)))}};a.thread=function(){var a=arguments;return function(){for(var b=[].slice.apply(arguments),c=0;c<a.length;c++)b=[a[c].apply(this,b)];return b[0]}};a.apply=function(a){return function(b){return a.apply(b,arguments)}};a.applyFunction=function(a){return function(b){return b.apply(a,arguments)}};a.call=function(a){return function(b){return a(b)}};a.callFunction=function(a){return function(b){return b(a)}};a.functionize=function(a){return d.isFunction(a)?a:function(){return a}};
a.get=function(a){return function(b){return b[a]}};a.getSet=function(a,b){return function(c){c[a]=b(c[a]);return c}};a.getByProperty=function(a){return function(b){return a[b]}};a.set=function(e,b){var c=a.functionize(b);return function(a){a[e]=c(a);return a}};a.setByProperty=function(e,b){var c=a.functionize(b);return function(a){e[a]=c(e,a);return e}};a.project=function(e){return function(b){return a.zipObject(e,d.map(e,a.getByProperty(b)))}};a.bindFunction=function(e){var b=d.map(d.rest(arguments),
a.functionize);return function(c){return e.apply(c,d.map(b,a.callFunction(c)))}};a.bindMethod=function(e){var b=d.map(d.rest(arguments),a.functionize);return function(c){var f=d.map(b,a.callFunction(c));c[e]||(c=d.first(f),f=d.rest(f));return c[e].apply(c,f)}};var g="pop,push,reverse,shift,sort,splice,unshift,join,charAt,charCodeAt,match,replace,search,split,substr,substring,toLowerCase,toUpperCase,concat,indexOf,lastIndexOf,slice".split(",");d.extend(a,a.zipObject(g,d.map(g,function(e){return a.partial(a.bindMethod,
e)})));a.unaryExpr=function(e,b){var c=a.functionize(b);return function(a){return e(c(a))}};a.binaryExpr=function(e,b,c){if(c===void 0)c=b,b=a.i;var d=a.functionize(b),i=a.functionize(c);return function(a){return e(d(a),i(a))}};a.ternaryExpr=function(e,b,c,d){var i=a.functionize(b),g=a.functionize(c),h=a.functionize(d);return function(a){return e(i(a),g(a),h(a))}};var g=function(a,b){return a+b},h=function(a,b){return a*b},j=function(a){return a+1};prepend=function(a,b){return(""+b).concat(a)};greaterThan=
function(a,b){return a>b};atLeast=function(a,b){return a>=b};lessThan=function(a,b){return a<b};atMost=function(a,b){return a<=b};greaterOf=function(a,b){return a>b?a:b};lesserOf=function(a,b){return a<b?a:b};equality=d.isEqual;inequality=function(){return!equality.apply(this,arguments)};and=function(a,b){return a&&b};neither=function(a,b){return!a&&!b};or=function(a,b){return a||b};xor=function(a,b){return a&&!b||!a&&b};not=function(a){return!a};ternary=function(a,b,c){return a?b:c};a.incr=a.increment=
a.partial(a.unaryExpr,j);a.decr=a.decrement=a.partial(a.unaryExpr,function(a){return a-1});a.sqr=a.square=a.partial(a.unaryExpr,function(a){return a*a});a.not=a.partial(a.unaryExpr,not);a.neg=a.negate=a.partial(a.unaryExpr,function(a){return a*-1});a.add=a.partial(a.binaryExpr,g);a.sub=a.subtract=a.partial(a.binaryExpr,function(a,b){return a-b});a.mul=a.multiply=a.partial(a.binaryExpr,h);a.div=a.divide=a.partial(a.binaryExpr,function(a,b){return a/b});a.mod=a.modulo=a.partial(a.binaryExpr,function(a,
b){return a%b});a.append=a.partial(a.binaryExpr,function(a,b){return(""+a).concat(b)});a.prepend=a.partial(a.binaryExpr,prepend);a.eq=a.isEqual=a.partial(a.binaryExpr,equality);a.neq=a.isNotEqual=a.partial(a.binaryExpr,inequality);a.gt=a.greaterThan=a.partial(a.binaryExpr,greaterThan);a.gte=a.atLeast=a.partial(a.binaryExpr,atLeast);a.lt=a.lessThan=a.partial(a.binaryExpr,lessThan);a.lte=a.atMost=a.partial(a.binaryExpr,atMost);a.greaterOf=a.partial(a.binaryExpr,greaterOf);a.lesserOf=a.partial(a.binaryExpr,
lesserOf);a.and=a.partial(a.binaryExpr,and);a.neither=a.partial(a.binaryExpr,neither);a.or=a.partial(a.binaryExpr,or);a.xor=a.partial(a.binaryExpr,xor);a.ternary=a.ifThenElse=a.partial(a.ternaryExpr,ternary);a.reduceExpr=function(d,b){var c;c=b===void 0?a.i:a.functionize(b);return function(a,b){return d(a,c(b))}};a.sum=a.partial(a.reduceExpr,g);a.product=a.partial(a.reduceExpr,h);a.count=a.partial(a.reduceExpr,j);a.min=a.partial(a.reduceExpr,lesserOf);a.max=a.partial(a.reduceExpr,greaterOf);a.average=
function(d){var b=1;return a.reduceExpr(function(a,d){var e=a*b+d,g=++b;return e/g},d)}}).call(this);
